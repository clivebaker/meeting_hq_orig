

<% content_for :js do %>

	<script>
  
  window.addEventListener('turbo:load', function() {

      if ( $.fn.dataTable.isDataTable( '#business_units-datatable' ) ) {
          table = $('#business_units-datatable').DataTable();
      }
      else {
          table = $('#business_units-datatable').DataTable( {
              responsive: true,
          } );
      }


		});
  </script>

<% end %>


<main class="content">
				<div class="container-fluid p-0">



				<div class="row">
						<div class="col-12">
							<div class="card">
								<div class="card-header">
									<div class="card-actions float-end">
										<div class="dropdown position-relative">
	
										</div>
									</div>
									<h5 class="card-title mb-0">Business units</h5>
								</div>
								<div class="card-body">


                  <table id='business_units-datatable' class="table table-striped" style="width:100%">
                    <thead>
                      <tr>
                        <th>Name</th>
                        <th data-orderable="false"></th>
                        <th data-orderable="false"></th>
                        <th data-orderable="false"></th>
                      </tr>
                    </thead>
                    <tbody>
                      <%@business_units.each do |business_unit|  %>
                      <tr>
                        <td><%= business_unit.name %></td>
                        <td class='text-end'>
                          <%= link_to link_to "Show this business_unit", organisation_business_unit_path(@organisation, business_unit), class: 'btn btn-primary' %>
                        </td>
                        <td class='text-end'>
                          <%= link_to edit_organisation_business_unit_path(@organisation, business_unit) , class: 'btn btn-primary' do %>
                            <i class="fas fa-edit"></i> Edit this business_unit
                          <% end %>         
                        </td>
                        <td class='text-end'>
                          <%= button_to organisation_business_unit_path(@organisation, business_unit), method: :delete, form: { data: { turbo_confirm: 'Are you sure you want to delete this business_unit.' }}, class: 'btn btn-secondary d-inline mt-1' do %>
                            <i class="fas fa-trash-alt"></i> Delete this business_unit
                          <% end  if business_unit.meetings.blank? %>                 
                        </td>
                      </tr>
                      <% end %>
                     
                    </tbody>
                  </table>

                  <div class="row">
                    <div class="col">
                      <%= link_to "New Business unit", new_organisation_business_unit_path(@organisation), class: 'btn btn-primary' %>
                    </div>
                    <div class="col text-end">
                    
                    </div>
                  </div>

                </div>
							</div>
						</div>
					</div>

				</div>
			</main>